<Page
    x:Class="SkyBuy.View.FlightSelection"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SkyBuy.View">

    <Grid Padding="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Spacing="10" Margin="0,0,0,20">
            <TextBlock Text="Complete Your Booking" FontSize="28" FontWeight="Bold"/>
            <Button Content="Back" Command="{x:Bind ViewModel.GoBackCommand}" />
        </StackPanel>

        <ScrollViewer Grid.Row="1">
            <StackPanel Spacing="25" MaxWidth="800" HorizontalAlignment="Left">

                <TextBlock Text="1. Select Flights" FontSize="18" FontWeight="SemiBold" Foreground="Gray"/>

                <ComboBox Header="Outbound Flight" 
                          ItemsSource="{x:Bind ViewModel.OutboundFlights, Mode=OneWay}"
                          SelectedItem="{x:Bind ViewModel.SelectedOutboundFlight, Mode=TwoWay}"
                          DisplayMemberPath="DisplayText"
                          HorizontalAlignment="Stretch" MinWidth="400"/>

                <ComboBox Header="Return Flight" 
                          Visibility="{x:Bind ViewModel.ReturnFlightVisibility, Mode=OneWay}"
                          ItemsSource="{x:Bind ViewModel.ReturnFlights, Mode=OneWay}"
                          SelectedItem="{x:Bind ViewModel.SelectedReturnFlight, Mode=TwoWay}"
                          DisplayMemberPath="DisplayText"
                          HorizontalAlignment="Stretch" MinWidth="400"/>

                <Rectangle Height="1" Fill="{ThemeResource SystemControlBackgroundBaseLowBrush}" Margin="0,10"/>

                <TextBlock Text="2. Passenger Details" FontSize="18" FontWeight="SemiBold" Foreground="Gray"/>

                <Grid ColumnSpacing="20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Header="First Name" Text="{x:Bind ViewModel.FirstName, Mode=OneWay}" IsReadOnly="True" Grid.Column="0"/>
                    <TextBox Header="Last Name" Text="{x:Bind ViewModel.LastName, Mode=OneWay}" IsReadOnly="True" Grid.Column="1"/>
                </Grid>

                <CalendarDatePicker Header="Date of Birth" Date="{x:Bind ViewModel.DateOfBirth, Mode=TwoWay}" HorizontalAlignment="Stretch"/>

                <TextBox Header="Passport Number" Text="{x:Bind ViewModel.PassportNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PlaceholderText="Enter passport ID"/>

                <TextBox Header="Nationality" Text="{x:Bind ViewModel.Nationality, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PlaceholderText="e.g. USA"/>

            </StackPanel>
        </ScrollViewer>

        <Border Grid.Row="2" Padding="20" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}" CornerRadius="8" Margin="0,20,0,0">
            <Grid>
                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Center">
                    <TextBlock Text="Total Price" FontSize="12" Foreground="Gray"/>
                    <TextBlock Text="{x:Bind ViewModel.TotalPriceDisplay, Mode=OneWay}" FontSize="24" FontWeight="Bold" Foreground="{ThemeResource SystemAccentColor}"/>
                </StackPanel>

                <Button Content="Confirm &amp; Save Booking" 
                        Command="{x:Bind ViewModel.ProceedToBookingCommand}"
                        IsEnabled="{x:Bind ViewModel.CanProceed, Mode=OneWay}"
                        Style="{StaticResource AccentButtonStyle}"
                        HorizontalAlignment="Right"
                        Padding="30,10"/>
            </Grid>
        </Border>
    </Grid>
</Page>